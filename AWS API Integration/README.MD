# AWS API Integration: The Untold Secret to Victory

A **serverless AWS Lambda solution** for fetching Power Energy Storage System (ESS) data, storing it in **Amazon DynamoDB**, and integrating with **Power BI** for real-time analytics.

## üèó System Architecture

```
                   +----------------------+
                   |  External API (TESS)  |
                   +----------------------+
                            |
                            v
                   +----------------------+
                   |  AWS Lambda (Python)  |
                   +----------------------+
                            |
        ----------------------------------------
        |                                      |
        v                                      v
+-----------------+                      +-----------------+
|  DynamoDB       |  <-- Stores Data --> | Power BI  |
| (NoSQL Storage) |                      | (Live Reports) |
+-----------------+                      +-----------------+
```

## üöÄ Features

‚úÖ **Fetch TESS Energy Data** - Retrieves real-time data from an external API  
‚úÖ **AWS Lambda Ready** - Deployable as a serverless function  
‚úÖ **DynamoDB Storage** - Efficient, scalable NoSQL database  
‚úÖ **Power BI Integration** - Pushes processed data for live reports  
‚úÖ **GPS Data Support** - Collects and stores geolocation movement data  
‚úÖ **Security First** - Implements authentication, logging, and error handling  

## üõ† Installation & Setup

### 1Ô∏è‚É£ Clone the Repository

```bash
git clone https://github.com/YOUR_USERNAME/TESS-Data-Collector.git
cd TESS-Data-Collector
```

### 2Ô∏è‚É£ Install Python Dependencies

```bash
pip install -r requirements.txt
```

### 3Ô∏è‚É£ Configure Environment Variables

Create a `.env` file in the root directory and add:

```ini
API_INSTALLATION_ID=your_installation_id
API_TOKEN=your_api_token
AWS_REGION=your_aws_region
DYNAMODB_TABLE_NAME=your_table_name
```

### 4Ô∏è‚É£ Run Locally

```bash
python tess.py
```

### 5Ô∏è‚É£ Deploy to AWS Lambda

```bash
zip -r deployment.zip . -x '*.git*'
aws lambda update-function-code \
  --function-name TESS_Data_Collector \
  --zip-file fileb://deployment.zip
```

## üì° API Endpoints (Future Enhancement)

| Method | Endpoint               | Description                  |
|--------|------------------------|------------------------------|
| GET    | `/api/v1/tess-data`    | Fetch processed TESS data    |
| GET    | `/api/v1/gps-data`     | Fetch GPS heatmap data       |
| POST   | `/api/v1/data`         | Upload new energy readings   |

## üìú Sample Code

### Fetch External API Data

```python
import requests
import os

API_URL = "https://external-api.com/v2/installations"
API_TOKEN = os.getenv("API_TOKEN")

def get_api_data():
    headers = {"x-authorization": f"Token {API_TOKEN}"}
    response = requests.get(f"{API_URL}/stats", headers=headers)
    return response.json()
```

### Store Data in DynamoDB

```python
import boto3
import os

dynamodb = boto3.resource("dynamodb")
table = dynamodb.Table(os.getenv("DYNAMODB_TABLE_NAME"))

def save_to_dynamodb(data):
    table.put_item(Item=data)
```

## üîí Security Considerations

üîπ **IAM Role Restrictions** - Lambda should have least privilege access  
üîπ **Environment Variables** - Avoid hardcoding sensitive credentials  
üîπ **API Gateway & Authentication** - Secure API access before exposing  
üîπ **Monitoring & Logging** - Implement **CloudWatch logs** for tracking  

## üìú License

This project is licensed under the **MIT License**.

## üìå Author

[Leonard Palad](https://www.linkedin.com/in/leonardspalad/)  
[Blog](https://www.cloudhermit.com.au/)
